!function n(o,r,s){function a(e,t){if(!r[e]){if(!o[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(d)return d(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}i=r[e]={exports:{}},o[e][0].call(i.exports,function(t){return a(o[e][1][t]||t)},i,i.exports,n,o,r,s)}return r[e].exports}for(var d="function"==typeof require&&require,t=0;t<s.length;t++)a(s[t]);return a}({1:[function(t,e,i){var n,o,r;n="humane",o=this,r=function(t,e){function i(t){t=t||{},this.queue=[],this.baseCls=t.baseCls||"humane",this.addnCls=t.addnCls||"",this.timeout="timeout"in t?t.timeout:2500,this.waitForMove=t.waitForMove||!1,this.clickToClose=t.clickToClose||!1,this.timeoutAfterMove=t.timeoutAfterMove||!1,this.container=t.container;try{this._setupEl()}catch(t){r.on(n,"load",r.bind(this._setupEl,this))}}var n=window,o=document,r={on:function(t,e,i){"addEventListener"in n?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i)},off:function(t,e,i){"removeEventListener"in n?t.removeEventListener(e,i,!1):t.detachEvent("on"+e,i)},bind:function(t,e){return function(){t.apply(e,arguments)}},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},config:function(t,e){return null!=t?t:e},transSupport:!1,useFilter:/msie [678]/i.test(navigator.userAgent),_checkTransition:function(){var t,e=o.createElement("div"),i={webkit:"webkit",Moz:"",O:"o",ms:"MS"};for(t in i)t+"Transition"in e.style&&(this.vendorPrefix=i[t],this.transSupport=!0)}};r._checkTransition();return i.prototype={constructor:i,_setupEl:function(){var t=o.createElement("div");if(t.style.display="none",!this.container){if(!o.body)throw"document.body is null";this.container=o.body}this.container.appendChild(t),this.el=t,this.removeEvent=r.bind(function(){var t=r.config(this.currentMsg.timeoutAfterMove,this.timeoutAfterMove);t?setTimeout(r.bind(this.remove,this),t):this.remove()},this),this.transEvent=r.bind(this._afterAnimation,this),this._run()},_afterTimeout:function(){r.config(this.currentMsg.waitForMove,this.waitForMove)?this.removeEventsSet||(r.on(o.body,"mousemove",this.removeEvent),r.on(o.body,"click",this.removeEvent),r.on(o.body,"keypress",this.removeEvent),r.on(o.body,"touchstart",this.removeEvent),this.removeEventsSet=!0):this.remove()},_run:function(){var t,e;!this._animating&&this.queue.length&&this.el&&(this._animating=!0,this.currentTimer&&(clearTimeout(this.currentTimer),this.currentTimer=null),t=this.queue.shift(),r.config(t.clickToClose,this.clickToClose)&&(r.on(this.el,"click",this.removeEvent),r.on(this.el,"touchstart",this.removeEvent)),0<(e=r.config(t.timeout,this.timeout))&&(this.currentTimer=setTimeout(r.bind(this._afterTimeout,this),e)),r.isArray(t.html)&&(t.html="<ul><li>"+t.html.join("<li>")+"</ul>"),this.el.innerHTML=t.html,this.currentMsg=t,this.el.className=this.baseCls,r.transSupport?(this.el.style.display="block",setTimeout(r.bind(this._showMsg,this),50)):this._showMsg())},_setOpacity:function(t){if(r.useFilter)try{this.el.filters.item("DXImageTransform.Microsoft.Alpha").Opacity=100*t}catch(t){}else this.el.style.opacity=String(t)},_showMsg:function(){var t,e,i,n=r.config(this.currentMsg.addnCls,this.addnCls);r.transSupport?this.el.className=this.baseCls+" "+n+" "+this.baseCls+"-animate":(t=0,this.el.className=this.baseCls+" "+n+" "+this.baseCls+"-js-animate",this._setOpacity(0),this.el.style.display="block",e=this,i=setInterval(function(){t<1?(1<(t+=.1)&&(t=1),e._setOpacity(t)):clearInterval(i)},30))},_hideMsg:function(){var t,e,i,n=r.config(this.currentMsg.addnCls,this.addnCls);r.transSupport?(this.el.className=this.baseCls+" "+n,r.on(this.el,r.vendorPrefix?r.vendorPrefix+"TransitionEnd":"transitionend",this.transEvent)):(t=1,e=this,i=setInterval(function(){0<t?((t-=.1)<0&&(t=0),e._setOpacity(t)):(e.el.className=e.baseCls+" "+n,clearInterval(i),e._afterAnimation())},30))},_afterAnimation:function(){r.transSupport&&r.off(this.el,r.vendorPrefix?r.vendorPrefix+"TransitionEnd":"transitionend",this.transEvent),this.currentMsg.cb&&this.currentMsg.cb(),this.el.style.display="none",this._animating=!1,this._run()},remove:function(t){t="function"==typeof t?t:null;r.off(o.body,"mousemove",this.removeEvent),r.off(o.body,"click",this.removeEvent),r.off(o.body,"keypress",this.removeEvent),r.off(o.body,"touchstart",this.removeEvent),r.off(this.el,"click",this.removeEvent),r.off(this.el,"touchstart",this.removeEvent),this.removeEventsSet=!1,t&&this.currentMsg&&(this.currentMsg.cb=t),this._animating?this._hideMsg():t&&t()},log:function(t,e,i,n){var o={};if(n)for(var r in n)o[r]=n[r];if("function"==typeof e)i=e;else if(e)for(var r in e)o[r]=e[r];return o.html=t,i&&(o.cb=i),this.queue.push(o),this._run(),this},spawn:function(n){var o=this;return function(t,e,i){return o.log.call(o,t,e,i,n),o}},create:function(t){return new i(t)}},new i},void 0!==e?e.exports=r():"function"==typeof define&&"object"==typeof define.amd?define(r):o[n]=r()},{}],2:[function(t,e,i){var M=t("humane-js").create({waitForMove:!0});window.onGeneratorLoaded=function(n){var o,i,r,t=n.opts,e=t.log,s=location.href.replace(/^(.*?:\/\/[^\/]+)\/.*$/,"$1"+t.staticRoot+t.editorPrefix),a=$(".outer").get(0),d={$name:$(".name"),$edit:$("textarea.editor"),$updates:$(".updateslist"),$uploads:$(".uploadsform"),binding:""},l=$("iframe.preview").get(0),c=!0,u=setInterval(function(){var t,e=(r=l.contentWindow)&&r.$;e&&!e.editorLoaded&&((t=r.document).addEventListener("dragover",function(t){_(t.clientX,t.clientY,!0),t.preventDefault()}),t.addEventListener("drop",function(t){t.preventDefault()}),t=(pRef=r.pubRef||{}).relPath||"",i=e('<link rel="stylesheet" href="'+t+'/pub/css/pub-preview.css">'),e("head").append(i),i.get(0).disabled=!0,t=e('<script src="'+t+'/pub/js/pub-preview.js"><\/script>'),e("body").append(t),e.editorLoaded=!0,clearInterval(u))},150),t=(n.on("nav",p),n.on("loaded",p),n.on("notify",function(t){e(t),M.log(t)}),/iPad|iPhone/i.test(navigator.userAgent));function h(){n.clientSaveHoldText(),n.clientSaveUnThrottled()}function f(){var t=i&&i.get(0);t&&(t.disabled?(t.disabled=!1,r.addEventListener("click",m,!0)):(t.disabled=!0,r.removeEventListener("click",m,!0)))}function m(t){for(var e,i=t.target;i&&"HTML"!==i.nodeName&&!i.getAttribute("data-render-html");)i=i.parentNode;i&&(e=i.getAttribute("data-render-html"))&&(v(n.fragment$[e]),f(),t.preventDefault())}function p(t,e,i){t?(history.replaceState(null,null,s+t+(e||"")+(i||"")),v(n.fragment$[t+i])):v(n.fragment$[d.binding]),w()}function v(t){d.binding&&d.holding&&(n.clientUpdateFragmentText(d.binding,d.$edit.val(),!0),d.holding=!1),t?(d.$name.text(t._href),t._holdUpdates?g(t._holdText):g(t._hdr+t._txt),d.binding=t._href,y()):(d.$name.text(""),g(""),d.binding="")}function g(t){var e=d.$edit.get(0).selectionStart,t=d.$edit.clone().val(t),i=t.get(0);d.$edit.replaceWith(t),(d.$edit=t).on("keyup",b),i.selectionStart=e,i.selectionEnd=e,d.$edit.focus(w).focus()}function b(){d.binding&&("hold"===n.clientUpdateFragmentText(d.binding,d.$edit.val())&&(d.holding=!0),y())}function y(){n.isFragmentModified(d.binding)?d.$name.addClass("modified"):d.$name.removeClass("modified")}function E(t){if(t.is(":hidden"))return d.$edit.addClass("showcontrols"),t.slideDown(150),1;t.slideUp(150),d.$edit.removeClass("showcontrols")}function w(){d.$updates.slideUp(150),d.$uploads.slideUp(150),d.$edit.removeClass("showcontrols")}function _(t,e,i){t=c?t/a.clientWidth:(i?e:e-25)/(a.clientHeight-25),e=i?o+100*t:100*t;0<=e&&T(e)}function T(t){var e,i,n=!1;-1===t?(n=!0,e=10,t=(i=o||Number(localStorage.editorSize)||50)<e?e:i):t%=100,!n&&o===t||(t&&(localStorage.editorSize=o=t),c?($(".left.col").css({width:t+"%",height:"100%"}),$(".right.col").css({width:100-t+"%",height:"100%"}),$(".handle").css({left:t+"%",top:"0"})):($(".top.row").css({height:t+"%",width:"100%"}),$(".bottom.row").css({height:100-t+"%",width:"100%"}),$(".handle").css({left:"0",top:t/100*(a.clientHeight-25)+25+"px"})))}$(window).on(t?"pagehide":"beforeunload",function(){e("beforeunload"),h()}),$(".commitbutton").click(function(){E(d.$updates)&&(h(),$.getJSON("/admin/pub-editor-diffs",function(t){t=n.renderTemplate({_href:"/pub-editor-updates",name:t.length+" Updates",diffs:t},"pub-editor-updates"),t=d.$updates.html(t).find("li");t.click(function(){var t=$(this).attr("data-href");t&&r.pager(t)}),t.find("span.diffcommit").click(function(){var t=$(this).parent().attr("data-file"),e=$(this).parent().attr("title").slice(24);if(confirm("Confirm commit:\n"+e+"\n"))return $.post("/admin/pub-editor-commit",{path:t},function(){n.emit("notify","Commit "+t+" OK")}).fail(function(t){n.emit("notify","Commit failed, please reload browser and try again.\n"+t.responseText)}),w(),!1}),t.find("span.diffrevert").click(function(){var t=$(this).parent().attr("data-file"),e=$(this).parent().attr("title").slice(24);if(confirm("Confirm revert:\n"+e+"\n"))return $.post("/admin/pub-editor-revert",{path:t},function(){location.reload()}).fail(function(t){n.emit("notify","Revert failed, please reload browser and try again.\n"+t.responseText)}),w(),!1})}));d.$uploads.hide()}),$(".editbutton").click(f),$(".menubutton").click(function(){E(d.$uploads),d.$updates.hide()}),$(".name").click(function(){n.isFragmentModified(d.binding)&&confirm("Are you sure you want to revert the edits from this session?")&&(n.revertFragmentState(d.binding),y())}),$(".helpbutton").click(function(){r.pager(n.page$["/help"]?"/help":"/pub-editor-help")}),$(".handle").attr("draggable","true").get(0).addEventListener("dragstart",function(t){t.dataTransfer.setData("Text","pane-handle-drag")}),document.addEventListener("dragover",function(t){_(t.clientX,t.clientY,!1),t.preventDefault()}),document.addEventListener("drop",function(t){t.preventDefault()}),T(-1)}},{"humane-js":1}]},{},[2]);