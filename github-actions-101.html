<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">

<meta name="robots" content="noindex, nofollow">
<link rel="canonical" href="https://jldec.me/github-actions-101">

<!-- html generated by pub-server from markdown /github-actions-101.md -->

<title>GitHub Actions 101</title>
<link rel="stylesheet" href="./css/pubblog.css">
<link rel="stylesheet" href="./css/open-sans.css">
<link rel="stylesheet" href="./css/font-awesome.css">
<link rel="stylesheet" href="./css/highlight-9.18.1-github.css">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>

<div data-render-layout="main-layout">
<header>
<div id="doctitle"><h1 id="jldecuk"><a href="./">jldec.uk</a></h1>
</div>
<div id="topmenu"><div data-render-html="/#topmenu">&nbsp;</div></div>
</header>

<div id="navicon" onclick=""><p><span class="fa fa-fw fa-2x">&#xf01a;</span></p>

<nav id="toc">
<ul>
<li><strong><a href="./">Home</a></strong></li>
<li><a href="./getting-started-with-go">Getting started with Go</a></li>
<li><a href="./extracting-an-esm-module-from-a-deno-script">Extracting an ESM module from a Deno script</a></li>
<li><a href="./running-a-compiled-deno-script-in-a-github-action">Running a compiled Deno script in a GitHub Action</a></li>
<li><a href="./getting-started-with-deno">Getting Started with Deno</a></li>
<li><a href="./calling-rust-from-a-cloudflare-worker">Calling Rust from a Cloudflare Worker</a></li>
<li><a href="./fun-with-vercel">Fun with Vercel</a></li>
<li><a href="./first-steps-using-cloudflare-pages">First steps using Cloudflare Pages</a></li>
<li><a href="./migrating-from-cjs-to-esm">Migrating from CommonJS to ESM</a></li>
<li><a href="./forays-from-node-to-rust">Forays from Node to Rust</a></li>
<li><a href="./github-actions-101">GitHub Actions 101</a></li>
<li><a href="./a-web-for-everyone">A Web for Everyone</a></li>
<li><a href="./why-serverless-at-the-edge">Why Serverless at the Edge?</a></li>
<li><a href="./spring-boot-101">Spring Boot 101</a></li>
<li><a href="./why-the-web-needs-better-html-editing-components">Why the Web needs better HTML editing components</a></li>
<li><a href="./about">About me</a></li>
</ul>
</nav>
</div>

<div id="title" style='background-image:url("images/snowy-boathouse.jpg");'>
  <div class="title">GitHub Actions 101</div>
  <div class="subtitle"></div>
</div>

<div id="main" onclick="">
<div id="content">

<div data-render-page="/github-actions-101">
<span class="permalink"><a class="permalink" href="./github-actions-101" title="Link to this post.">&#xf0c1;</a></span><span class="date">2020-11-27</span>

<div >
<div data-render-html="/github-actions-101"><h1 id="how-do-github-actions-work">How do GitHub Actions work?</h1>
<p>Today I was feeling a bit lost (again, sigh) trying to understand GitHub Actions.</p>
<p>Specifically, the <a href="https://docs.github.com/en/free-pro-team@latest/actions" target="_blank" rel="noopener">documentation</a> did not appear to have an overview of how actions are composed and what they are composed of. What are those things that run? How are they named and referenced?</p>
<p>In retrospect, instead of the docs, I would recommend getting started by looking at the yaml for the <a href="https://github.com/actions/starter-workflows/blob/main/ci/blank.yml" target="_blank" rel="noopener">Simple workflow</a>. The button appears in the <strong>Actions</strong> tab on any new repo.</p>
<p><img src="./images/actions-start-here.png" alt="Screenshot of GitHub Actions tab on new repo, showing sample workflow"></p>
<p>The button will open the workflow yaml in an editor (it won&#39;t be committed to your repo yet).</p>
<p><img src="./images/simple-workflow.png" alt="Screenshot of Simple workflow yaml code"></p>
<h2 id="not-so-mysterious-after-all-smile-o">Not so mysterious after all <span class="fa">&#xf118;</span></h2>
<blockquote>
<p>The first takeaway is that actions can be written using simple shell commands.</p>
</blockquote>
<p>Commands run in a shell in VMs which come preinstalled with <a href="https://github.com/actions/virtual-environments/blob/main/images/linux/Ubuntu1804-README.md" target="_blank" rel="noopener">commonly used tools</a>. There is no need to learn a new scripting language. You can even write your action as a shell script in a file, and invoke it from the workflow yaml.</p>
<p>If you want, you can package and re-use portions of a job in different workflows. These components are also called <a href="https://docs.github.com/en/actions/creating-actions" target="_blank" rel="noopener">actions</a> (that&#39;s where some of my initial confusion originated), <em>but you don&#39;t need to learn to write those yourself in order to build your own workflows</em>.</p>
<h2 id="dont-be-thrown-off-by-the-yaml">Don&#39;t be thrown off by the yaml</h2>
<p>Each job is identified by its key e.g. <code>simple-job</code> in the example below.<br>The <a href="https://docs.github.com/en/free-pro-team@latest/actions/reference/workflow-syntax-for-github-actions" target="_blank" rel="noopener">workflow syntax</a> documentation denotes this as <code>jobs.&lt;job-id&gt;</code>.</p>
<pre><code class="language-yaml">on: push
jobs:
  simple-job:
    runs-on: ubuntu-latest
    env:
      HELLO: world
    steps:
    - run: &#39;echo Hello: $HELLO&#39;
    - run: |
        echo node version: `node -v`
        pwd
</code></pre>
<p><code>steps:</code> contains a list of commands, each described by a <code>run:</code><br>(In the earlier example above, there is also an <a href="https://docs.github.com/en/free-pro-team@latest/actions/creating-actions/about-actions" target="_blank" rel="noopener">action</a>, described with <code>uses:</code> instead of <code>run:</code>)</p>
<p>The 1st run: command above is quoted, to avoid &quot;: &quot; being interpreted as a yaml map.</p>
<p>The 2nd run: contains 2 commands in a multi-line (indented) block using &quot;|&quot;. This syntax does not require quotes, making it convenient for embedded scripts.</p>
<p>If you push the workflow above to a new repo on GitHub, the result should look like this:</p>
<p><img src="./images/action1.png" alt="Screenshot of workflow run showing simple-job output"></p>
<h3 id="a-few-more-things-to-know-about-yaml">A few more things to know about <a href="https://en.wikipedia.org/wiki/YAML" target="_blank" rel="noopener">yaml</a></h3>
<ul>
<li>You can test the validity of your yaml <a href="https://onlineyamltools.com/convert-yaml-to-json" target="_blank" rel="noopener">online</a>.<br>Seeing the JSON representation will often clear up confusion.</li>
<li>Quotes around (scalar) strings are optional, BUT there are a lot of gotchas!<br>E.g. look out for strings with &#39;- &#39; at the start, or &#39;: &#39; or &#39;#&#39; in the middle, or &#39;:&#39; at the end, or strings that look like numbers or booleans.</li>
<li>Maps are usually written as <code>key: value</code> lines at the same indentation.<br>Lists are usually written as lines with <code>- value</code>.<br><em>Or</em> use <code>{key1: v1, key2: v2, ...}</code> for maps, <code>[v1, v2, ...]</code> for lists.</li>
<li>Indentation must use spaces (no tabs).</li>
<li>For more about multi-line strings see <a href="https://yaml-multiline.info/" target="_blank" rel="noopener">https://yaml-multiline.info/</a>.</li>
</ul>
<blockquote>
<p>Have fun playing with GitHub Actions<br><span class="fa">&#xf085;</span></p>
</blockquote>
<p><em>To leave a comment<br>please visit <a href="https://dev.to/jldec/github-actions-101-pfn" target="_blank" rel="noopener">dev.to/jldec</a></em></p>
</div>
</div>


</div><!--page-->

<div id="credit"><p><span class="fa">&#xf004;</span> powered by <a href="https://jldec.github.io/pub-doc/" target="_blank" rel="noopener">pub-server</a> and <a href="https://github.com/jldec/pub-theme-pubblog" target="_blank" rel="noopener">pub-theme-pubblog</a></p>
</div>

</div>
</div>

</div><!--layout-->

<script>window.pubRef = {"href":"/github-actions-101","relPath":"."};</script>
<script src="./js/jquery-1.12.4.min.js" ></script>
<script src="./js/highlight-9.18.1.min.js" ></script>
<script src="./js/pub-pkg-highlight.js" ></script>
<script src="./pub/pub-ux.js" ></script>
<!-- copyright -->
</body>
</html>
